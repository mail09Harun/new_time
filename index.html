<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#000000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Dijital Saat">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="screen-orientation" content="landscape">
    <meta name="orientation" content="landscape">
    
    <title>Dijital Saat</title>
    
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="icons/icon-192.png">
    <link rel="apple-touch-icon" href="icons/icon-192.png">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@900&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            background: #000;
            font-family: Arial, sans-serif;
            overflow: hidden;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Saat AlanÄ± */
        #clockContainer {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        #clock {
            font-family: 'Orbitron', monospace;
            font-weight: 900;
            font-size: 150px;
            color: #fff;
            letter-spacing: 20px;
            transition: all 0.3s ease;
            transform: scale(1);
        }

        /* Kolon */
        .colon {
            animation: blink 1s infinite;
            display: inline-block;
        }

        @keyframes blink {
            0%, 49% { opacity: 1; }
            50%, 100% { opacity: 0; }
        }

        /* Ayarlar Butonu - Sol Ãœstte */
        #settingsBtn {
            position: fixed;
            top: 20px;
            left: 20px;
            width: 50px;
            height: 50px;
            background: rgba(255, 255, 255, 0.08);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            color: rgba(255, 255, 255, 0.7);
            font-size: 24px;
            cursor: pointer;
            z-index: 1000;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        #settingsBtn:hover {
            background: rgba(255, 255, 255, 0.15);
            border-color: rgba(255, 255, 255, 0.4);
            color: #fff;
            transform: rotate(90deg) scale(1.05);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
        }

        #settingsBtn:active {
            transform: scale(0.95) rotate(90deg);
        }

        /* Ana Ekrana Ekle Butonu */
        #installBtn {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 12px 24px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 25px;
            color: #fff;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            z-index: 1000;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            display: none;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        #installBtn.show {
            display: flex;
        }

        #installBtn:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.5);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
        }

        #installBtn:active {
            transform: translateY(0);
        }

        /* Ayarlar MenÃ¼sÃ¼ */
        #settingsMenu {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: #111;
            padding: 20px;
            transform: translateY(100%);
            transition: transform 0.3s ease;
            z-index: 999;
            max-height: 70vh;
            overflow-y: auto;
            border-top-left-radius: 20px;
            border-top-right-radius: 20px;
            box-shadow: 0 -5px 30px rgba(0, 0, 0, 0.5);
        }

        #settingsMenu.show {
            transform: translateY(0);
        }

        /* MenÃ¼ BaÅŸlÄ±ÄŸÄ± */
        .menu-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #333;
        }

        .menu-title {
            color: #fff;
            font-size: 20px;
            font-weight: bold;
        }

        .close-btn {
            background: none;
            border: none;
            color: #888;
            font-size: 32px;
            cursor: pointer;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .close-btn:hover {
            color: #fff;
            transform: rotate(90deg);
        }

        /* Overlay */
        #overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            z-index: 998;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
        }

        #overlay.show {
            opacity: 1;
            pointer-events: auto;
        }

        /* Kontrol GruplarÄ± */
        .control-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 20px;
        }

        .control-label {
            color: #888;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Renk ButonlarÄ± */
        #colorButtons {
            display: grid;
            grid-template-columns: repeat(9, 1fr);
            gap: 8px;
        }

        .color-btn {
            width: 100%;
            aspect-ratio: 1;
            border: 2px solid #333;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .color-btn:hover {
            transform: scale(1.1);
            border-color: #fff;
        }

        .color-btn.active {
            border: 3px solid #fff;
            box-shadow: 0 0 15px currentColor;
        }

        /* Boyut ButonlarÄ± */
        #sizeButtons {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr 2fr;
            gap: 8px;
        }

        .size-btn {
            background: #222;
            color: #fff;
            border: 2px solid #444;
            border-radius: 8px;
            padding: 12px;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .size-btn:hover {
            background: #333;
            border-color: #666;
        }

        .size-btn:active {
            transform: scale(0.95);
        }

        /* Tam Ekran Modu */
        .fullscreen #settingsBtn {
            display: none;
        }

        .fullscreen #installBtn {
            display: none !important;
        }

        .fullscreen #settingsMenu {
            display: none;
        }

        .fullscreen #overlay {
            display: none;
        }

        .fullscreen #clockContainer {
            height: 100vh;
        }

        /* Tam Ekran Ä°pucu */
        #fullscreenHint {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.7);
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 14px;
            backdrop-filter: blur(10px);
            z-index: 1001;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
        }

        #fullscreenHint.show {
            opacity: 1;
        }

        /* Responsive */
        @media (max-width: 768px) {
            #settingsBtn {
                width: 45px;
                height: 45px;
                font-size: 20px;
                top: 15px;
                left: 15px;
            }
            
            #clock {
                font-size: 100px;
                letter-spacing: 15px;
            }
            
            #colorButtons {
                grid-template-columns: repeat(9, 1fr);
            }
            
            #sizeButtons {
                grid-template-columns: 1fr 1fr 1fr 2fr;
            }
        }

        @media (max-width: 480px) {
            #settingsBtn {
                width: 40px;
                height: 40px;
                font-size: 18px;
                top: 12px;
                left: 12px;
            }
            
            #clock {
                font-size: 60px;
                letter-spacing: 10px;
            }
            
            .size-btn {
                font-size: 16px;
                padding: 10px;
            }
        }

        /* Landscape Mode */
        @media (orientation: landscape) and (max-height: 500px) {
            #clockContainer {
                padding: 10px;
            }
            
            #settingsMenu {
                padding: 15px;
                max-height: 85vh;
            }
            
            .control-group {
                gap: 5px;
                margin-bottom: 15px;
            }
        }
    </style>
</head>
<body>
    <div id="clockContainer">
        <div id="clock">00<span class="colon">:</span>00</div>
    </div>

    <!-- Ayarlar Butonu -->
    <button id="settingsBtn" title="Ayarlar">âš™</button>

    <!-- Ana Ekrana Ekle Butonu -->
    <button id="installBtn" title="Ana Ekrana Ekle">
        <span>ðŸ“±</span>
        <span>Ana Ekrana Ekle</span>
    </button>

    <!-- Tam Ekran Ä°pucu -->
    <div id="fullscreenHint">Yatay kaydÄ±r veya ESC</div>

    <!-- Overlay -->
    <div id="overlay"></div>

    <!-- Ayarlar MenÃ¼sÃ¼ -->
    <div id="settingsMenu">
        <div class="menu-header">
            <div class="menu-title">âš™ Ayarlar</div>
            <button class="close-btn" id="closeMenu">Ã—</button>
        </div>

        <div class="control-group">
            <div class="control-label">Renk SeÃ§imi</div>
            <div id="colorButtons">
                <button class="color-btn" style="background: #f00" data-color="#f00" title="KÄ±rmÄ±zÄ±"></button>
                <button class="color-btn" style="background: #0f0" data-color="#0f0" title="YeÅŸil"></button>
                <button class="color-btn" style="background: #00f" data-color="#00f" title="Mavi"></button>
                <button class="color-btn" style="background: #ff0" data-color="#ff0" title="SarÄ±"></button>
                <button class="color-btn" style="background: #f0f" data-color="#f0f" title="Pembe"></button>
                <button class="color-btn" style="background: #0ff" data-color="#0ff" title="CamgÃ¶beÄŸi"></button>
                <button class="color-btn" style="background: #fa0" data-color="#fa0" title="Turuncu"></button>
                <button class="color-btn" style="background: #808" data-color="#808" title="Mor"></button>
                <button class="color-btn active" style="background: #fff" data-color="#fff" title="Beyaz"></button>
            </div>
        </div>

        <div class="control-group">
            <div class="control-label">Boyut KontrolÃ¼</div>
            <div id="sizeButtons">
                <button class="size-btn" id="btnSmaller">âˆ’</button>
                <button class="size-btn" id="btnReset">âŸ²</button>
                <button class="size-btn" id="btnBigger">+</button>
                <button class="size-btn" id="btnFullscreen">â›¶ Tam Ekran</button>
            </div>
        </div>
    </div>

    <script>
        let currentColor = '#fff';
        let currentScale = 1;
        let isFullscreen = false;
        let fullscreenHintTimeout;
        let deferredPrompt;

        // PWA Install
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            document.getElementById('installBtn').classList.add('show');
        });

        window.addEventListener('appinstalled', () => {
            deferredPrompt = null;
            document.getElementById('installBtn').classList.remove('show');
        });

        async function installApp() {
            if (!deferredPrompt) return;
            
            deferredPrompt.prompt();
            const { outcome } = await deferredPrompt.userChoice;
            
            if (outcome === 'accepted') {
                deferredPrompt = null;
                document.getElementById('installBtn').classList.remove('show');
            }
        }

        // Saati GÃ¼ncelle
        function updateClock() {
            const now = new Date();
            const h = String(now.getHours()).padStart(2, '0');
            const m = String(now.getMinutes()).padStart(2, '0');
            
            document.getElementById('clock').innerHTML = 
                `${h}<span class="colon">:</span>${m}`;
        }

        // Ayarlar MenÃ¼sÃ¼nÃ¼ AÃ§/Kapat
        function toggleSettings() {
            const menu = document.getElementById('settingsMenu');
            const overlay = document.getElementById('overlay');
            
            menu.classList.toggle('show');
            overlay.classList.toggle('show');
        }

        function closeSettings() {
            document.getElementById('settingsMenu').classList.remove('show');
            document.getElementById('overlay').classList.remove('show');
        }

        // Renk DeÄŸiÅŸtir
        function changeColor(color) {
            currentColor = color;
            document.getElementById('clock').style.color = color;
            
            document.querySelectorAll('.color-btn').forEach(b => b.classList.remove('active'));
            event.target.classList.add('active');
            
            localStorage.setItem('clockColor', color);
        }

        // Boyut DeÄŸiÅŸtir
        function changeScale(scale) {
            currentScale = Math.max(0.3, Math.min(2, scale));
            document.getElementById('clock').style.transform = `scale(${currentScale})`;
            localStorage.setItem('clockScale', currentScale);
        }

        // Tam Ekran
        function toggleFullscreen() {
            const body = document.body;
            const hint = document.getElementById('fullscreenHint');
            
            if (!isFullscreen) {
                body.classList.add('fullscreen');
                closeSettings();
                
                if (document.documentElement.requestFullscreen) {
                    document.documentElement.requestFullscreen();
                } else if (document.documentElement.webkitRequestFullscreen) {
                    document.documentElement.webkitRequestFullscreen();
                }
                
                isFullscreen = true;
                
                hint.classList.add('show');
                clearTimeout(fullscreenHintTimeout);
                fullscreenHintTimeout = setTimeout(() => {
                    hint.classList.remove('show');
                }, 3000);
            } else {
                exitFullscreen();
            }
        }

        // Tam Ekrandan Ã‡Ä±k
        function exitFullscreen() {
            document.body.classList.remove('fullscreen');
            document.getElementById('fullscreenHint').classList.remove('show');
            
            if (document.exitFullscreen) {
                document.exitFullscreen();
            } else if (document.webkitExitFullscreen) {
                document.webkitExitFullscreen();
            }
            
            isFullscreen = false;
        }

        // AyarlarÄ± YÃ¼kle
        function loadSettings() {
            const savedColor = localStorage.getItem('clockColor') || '#fff';
            const savedScale = parseFloat(localStorage.getItem('clockScale')) || 1;
            
            currentColor = savedColor;
            currentScale = savedScale;
            
            document.getElementById('clock').style.color = savedColor;
            document.getElementById('clock').style.transform = `scale(${savedScale})`;
            
            document.querySelectorAll('.color-btn').forEach(b => {
                if (b.dataset.color === savedColor) {
                    b.classList.add('active');
                } else {
                    b.classList.remove('active');
                }
            });
        }

        // Event Listeners
        document.addEventListener('DOMContentLoaded', () => {
            loadSettings();
            updateClock();
            setInterval(updateClock, 1000);
            
            // Ayarlar Butonu
            document.getElementById('settingsBtn').addEventListener('click', toggleSettings);
            document.getElementById('closeMenu').addEventListener('click', closeSettings);
            document.getElementById('overlay').addEventListener('click', closeSettings);
            
            // Ana Ekrana Ekle Butonu
            document.getElementById('installBtn').addEventListener('click', installApp);
            
            // Renk ButonlarÄ±
            document.querySelectorAll('.color-btn').forEach(btn => {
                btn.addEventListener('click', () => changeColor(btn.dataset.color));
            });
            
            // Boyut ButonlarÄ±
            document.getElementById('btnSmaller').addEventListener('click', () => changeScale(currentScale - 0.15));
            document.getElementById('btnBigger').addEventListener('click', () => changeScale(currentScale + 0.15));
            document.getElementById('btnReset').addEventListener('click', () => changeScale(1));
            document.getElementById('btnFullscreen').addEventListener('click', toggleFullscreen);
            
            // Fullscreen Ã‡Ä±kÄ±ÅŸ
            document.addEventListener('fullscreenchange', () => {
                if (!document.fullscreenElement && isFullscreen) {
                    exitFullscreen();
                }
            });
            
            document.addEventListener('webkitfullscreenchange', () => {
                if (!document.webkitFullscreenElement && isFullscreen) {
                    exitFullscreen();
                }
            });
            
            // Tam Ekranda Yatay KaydÄ±rma ile Ã‡Ä±kÄ±ÅŸ
            let touchStartX = 0;
            let touchStartY = 0;
            
            document.getElementById('clockContainer').addEventListener('touchstart', (e) => {
                touchStartX = e.touches[0].clientX;
                touchStartY = e.touches[0].clientY;
            });
            
            document.getElementById('clockContainer').addEventListener('touchmove', (e) => {
                if (!isFullscreen) return;
                
                const touchX = e.touches[0].clientX;
                const touchY = e.touches[0].clientY;
                const diffX = Math.abs(touchX - touchStartX);
                const diffY = Math.abs(touchY - touchStartY);
                
                // Yatay kaydÄ±rma (saÄŸa veya sola) - en az 100px
                if (diffX > 100 && diffX > diffY) {
                    exitFullscreen();
                }
            });
        });

        // Service Worker
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js');
        }
    </script>
</body>
</html>
